(this["webpackJsonppoc-xstate-react"]=this["webpackJsonppoc-xstate-react"]||[]).push([[0],{22:function(e,t,n){e.exports=n(31)},27:function(e,t,n){},28:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);var o=n(7),a=n.n(o),c=n(19),r=n.n(c),l=(n(27),n(14)),s=(n(28),n(20)),u=n(15),i=n(2),f=Object(u.a)({id:"fetch",initial:"none",context:{promise:null},states:{none:{on:{FETCH:{target:"loading",actions:"dofetch"}}},loading:{invoke:{id:"doFetch",src:function(e,t){return fetch(t.url).then((function(e){return e.json()}))},onDone:{target:"success",actions:Object(i.b)({data:function(e,t){return console.log(t,e),t.data}})},onError:{target:"failure",actions:Object(i.b)({error:function(e,t){return console.log(e,t),t.data}})}}},cancelled:{on:{FETCH:"loading"}},failure:{on:{FETCH:"loading"}},success:{on:{FETCH:"loading"}}}},{actions:{dofetch:function(e,t){console.log("#### dofetch",e,t),e.promise=fetch(t.url).then((function(e){Object(i.b)({response:e})}))}}}),h=function(e){var t=Object(s.useMachine)(f,{devTools:!0}),n=Object(l.a)(t,2),c=n[0],r=n[1];return Object(o.useEffect)((function(){console.log("Fetch.useEffect, init"),"none"===c.value&&c.context.url!==e.url&&(console.log("Fetch.useEffect, value === none"),r("FETCH",{url:e.url}))}),[e.url,r,c.value,c.context.url]),a.a.createElement("div",null,a.a.createElement("p",null,"Current status: ",c.value," "),"failure"===c.value&&a.a.createElement("p",null,"Error: ",c.context.error.message))};var d=function(){var e=a.a.useState(!0),t=Object(l.a)(e,2),n=t[0],o=t[1];return a.a.createElement("div",{className:"App"},a.a.createElement("header",{className:"App-header"},a.a.createElement("p",null,"The goal here is to test X-State with fetch and see how we can handle complex scenarios"),a.a.createElement("button",{onClick:function(){return o(!n)}},"Toggle"),n&&a.a.createElement(h,{url:"https://cat-fact.herokuapp.com"})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(d,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[22,1,2]]]);
//# sourceMappingURL=main.8f19a439.chunk.js.map